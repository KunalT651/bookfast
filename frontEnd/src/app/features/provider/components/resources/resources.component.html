<div class="resources-header">
  <h2>Manage Resources</h2>
  <button (click)="openForm()" [disabled]="loading">+ Add Resource</button>
</div>

<div *ngIf="loading" class="loading-overlay">
  <div class="loading-spinner">Loading resources...</div>
</div>

<div *ngIf="errorMessage" class="error-message">
  {{ errorMessage }}
</div>

<div *ngIf="successMessage" class="success-message">
  {{ successMessage }}
</div>

<div class="resource-form-modal" *ngIf="showForm">
  <form [formGroup]="resourceForm" (ngSubmit)="onSubmit()">
    <h3>Add New Resource</h3>
    <label>Name: <input formControlName="name" required></label>
    <label>Description: <textarea formControlName="description"></textarea></label>
    <label>Tags (comma separated): <input formControlName="tags"></label>
    <label>Price: <input type="number" formControlName="price"></label>
    <label>Experience (years): <input type="number" formControlName="experienceYears"></label>
    <label>Phone: <input formControlName="phone"></label>
    <label>Email: <input formControlName="email"></label>
    <label>Specialization: <input formControlName="specialization"></label>
    <label>Status: 
      <select formControlName="status">
        <option value="active">Active</option>
        <option value="inactive">Inactive</option>
      </select>
    </label>
    <label>Image URL: <input formControlName="imageUrl"></label>
    <div class="form-actions">
      <button type="submit">Save</button>
      <button type="button" (click)="closeForm()">Cancel</button>
    </div>
  </form>
</div>

  <div class="resource-cards" *ngIf="!loading">
    <div *ngIf="resources.length === 0" class="no-resources">
      <p>No resources found. Click "+ Add Resource" to create your first resource.</p>
    </div>
    <div class="resource-card" *ngFor="let resource of resources">
      <img *ngIf="resource.imageUrl" [src]="resource.imageUrl" alt="{{resource.name}}" />
      <h3>{{ resource.name }}</h3>
      <p>{{ resource.description }}</p>
      <div class="tags">
        <span *ngFor="let tag of resource.tags" class="tag">{{ tag }}</span>
      </div>
  <div><strong>Price:</strong> ${{ resource.price }}</div>
      <div><strong>Experience:</strong> {{ resource.experienceYears }} years</div>
      <div><strong>Contact:</strong> {{ resource.phone }} | {{ resource.email }}</div>
      <div><strong>Specialization:</strong> {{ resource.specialization }}</div>
      <div><strong>Status:</strong> {{ resource.status }}</div>
  <button class="availability-btn" (click)="openAvailability(resource)">Availability</button>
  <button class="edit-btn" (click)="openEditForm(resource)">Edit</button>
  <button class="delete-btn" (click)="deleteResource(resource)">Delete</button>
    </div>
  </div>

  <app-resource-availability-modal
    *ngIf="showAvailabilityModal && selectedResource && selectedResource.id !== undefined"
    [resourceId]="selectedResource.id || 0"
    (close)="closeAvailability()"
  ></app-resource-availability-modal>