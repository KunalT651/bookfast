  <app-payment
    *ngIf="showPaymentForm && paymentBooking"
    [booking]="paymentBooking"
    (paymentSuccess)="onPaymentSuccess()"
  ></app-payment>
<div class="home-container">
  <h2 class="home-title">Find and Book Top Service Providers</h2>
  
  <!-- Search and Filter Section -->
  <div class="search-section">
    <div class="search-bar">
      <input
        id="searchTerm"
        name="searchTerm"
        type="text"
        [(ngModel)]="searchTerm"
        (input)="onSearchChange()"
        (ngModelChange)="applyFilters()"
        placeholder="Search by name, specialization, or tag..."
        class="search-input"
        aria-label="Search providers"
      />
      <button class="filter-toggle-btn" (click)="toggleFilters()">
        <span class="filter-icon">ğŸ”</span>
        {{ showFilters ? 'Hide Filters' : 'Show Filters' }}
      </button>
    </div>

    <!-- Advanced Filters Panel -->
    <div class="filters-panel" *ngIf="showFilters">
      <div class="filters-grid">
        <!-- Service Category Filter -->
        <div class="filter-group">
          <label for="serviceCategory">ğŸ¥ Service Category</label>
          <select 
            id="serviceCategory" 
            name="serviceCategory" 
            [(ngModel)]="selectedCategory" 
            (ngModelChange)="applyFilters()" 
            class="filter-select">
            <option value="">All Categories</option>
            <option *ngFor="let cat of serviceCategories" [value]="cat.name">{{ cat.name }}</option>
          </select>
        </div>

        <!-- Specialization Filter -->
        <div class="filter-group">
          <label for="specialization">ğŸ¯ Specialization</label>
          <input 
            id="specialization"
            name="specialization"
            type="text" 
            [(ngModel)]="selectedSpecialization" 
            (ngModelChange)="applyFilters()"
            placeholder="e.g., Cardiology, Math"
            class="filter-input"
          />
        </div>

        <!-- Price Range Filter -->
        <div class="filter-group">
          <label>ğŸ’° Price Range</label>
          <div class="price-range">
            <input 
              id="minPrice"
              name="minPrice"
              type="number" 
              [(ngModel)]="minPrice" 
              (ngModelChange)="applyFilters()"
              placeholder="Min"
              min="0"
              class="filter-input price-input"
              aria-label="Minimum price"
            />
            <span class="range-separator">-</span>
            <input 
              id="maxPrice"
              name="maxPrice"
              type="number" 
              [(ngModel)]="maxPrice" 
              (ngModelChange)="applyFilters()"
              placeholder="Max"
              min="0"
              class="filter-input price-input"
              aria-label="Maximum price"
            />
          </div>
        </div>

        <!-- Rating Filter -->
        <div class="filter-group">
          <label for="minRating">â­ Minimum Rating</label>
          <select 
            id="minRating" 
            name="minRating" 
            [(ngModel)]="minRating" 
            (ngModelChange)="applyFilters()" 
            class="filter-select">
            <option [ngValue]="null">Any Rating</option>
            <option [ngValue]="4.5">4.5+ Stars</option>
            <option [ngValue]="4.0">4.0+ Stars</option>
            <option [ngValue]="3.5">3.5+ Stars</option>
            <option [ngValue]="3.0">3.0+ Stars</option>
          </select>
        </div>

        <!-- Availability Filter -->
        <div class="filter-group">
          <label for="onlyAvailable" class="checkbox-label">
            <input 
              id="onlyAvailable"
              name="onlyAvailable"
              type="checkbox" 
              [(ngModel)]="onlyAvailable" 
              (ngModelChange)="applyFilters()"
              class="filter-checkbox"
            />
            <span>ğŸ“… Only show available providers</span>
          </label>
        </div>
      </div>

      <div class="filter-actions">
        <button class="clear-filters-btn" (click)="clearFilters()">
          <span>ğŸ—‘ï¸</span> Clear All Filters
        </button>
        <span class="results-count">{{ filteredResources.length }} provider(s) found</span>
      </div>
    </div>
  </div>

  <!-- Resource Grid -->
  <div class="resource-grid">
    <app-resource-card *ngFor="let resource of filteredResources" [resource]="resource"></app-resource-card>
  </div>

  <!-- No Results -->
  <div *ngIf="filteredResources.length === 0" class="no-results">
    <div class="no-results-icon">ğŸ”</div>
    <h3>No providers found</h3>
    <p>Try adjusting your search or filters</p>
    <button class="btn-reset" (click)="clearFilters()">Reset Filters</button>
  </div>


  <app-booking-modal
    *ngIf="showModal && selectedResource"
    [resource]="selectedResource"
    [open]="showModal"
    (close)="onModalClose()"
    (confirm)="onModalConfirm($event)"
  ></app-booking-modal>

  <app-booking
    *ngIf="showBookingForm && selectedResource && bookingSlots && bookingSlots.length"
    [resourceId]="selectedResource.id"
    [slots]="bookingSlots"
    (payment)="onPayment($event)"
  ></app-booking>
</div>