<div class="bookings-container">
  <h2>My Bookings</h2>
  
  <div *ngIf="errorMessage" class="error-message">
    {{ errorMessage }}
  </div>
  
  <div *ngIf="loading" class="loading-message">
    Processing your request...
  </div>
  
  <table>
    <thead>
      <tr>
        <th>Service</th>
        <th>Provider</th>
        <th>Date</th>
        <th>Time</th>
        <th>Amount Paid</th>
        <th>Status</th>
        <th>Payment</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let booking of bookings" [class.past-booking]="isPastBooking(booking)">
        <td>{{ booking.resourceName }}</td>
        <td>{{ booking.providerName }}</td>
        <td>{{ booking.date }}</td>
        <td>{{ booking.startTime }} - {{ booking.endTime }}</td>
        <td>${{ booking.finalAmount || booking.amount || 0 }}</td>
        <td>{{ booking.status }}</td>
        <td>{{ booking.paymentStatus }}</td>
        <td>
         <button (click)="cancelBooking(booking.id!)" 
                 [disabled]="booking.status === 'cancelled' || isPastBooking(booking) || loading"
                 class="cancel-btn">
           {{ booking.status === 'cancelled' ? 'Cancelled' : 'Cancel Booking' }}
         </button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
