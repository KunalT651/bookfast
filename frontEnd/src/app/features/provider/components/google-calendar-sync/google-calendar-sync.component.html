<div class="calendar-sync">
  <div class="sync-header">
    <h3>üìÖ Google Calendar Sync</h3>
    <p>Sync your Google Calendar with BookFast to manage your availability and bookings</p>
  </div>

  <div class="sync-status" [class.connected]="isConnected">
    <div class="status-indicator">
      <span class="status-dot" [class.connected]="isConnected"></span>
      <span class="status-text">
        {{ isConnected ? 'Connected to Google Calendar' : 'Not connected' }}
      </span>
    </div>
  </div>

  <div class="sync-content" *ngIf="!isConnected">
    <div class="auth-instructions" *ngIf="!isGmail">
      <div class="gmail-warning">
        <h4>‚ö†Ô∏è Gmail Required</h4>
        <p>Google Calendar integration requires a Gmail address. Your current email is: <strong>{{ currentEmail }}</strong></p>
        <p>To enable calendar sync, please:</p>
        <ul>
          <li>Log out and register with a Gmail account (e.g., yourname@gmail.com), or</li>
          <li>Update your profile to use a Gmail address</li>
        </ul>
      </div>
    </div>

    <div class="auth-instructions" *ngIf="isGmail">
      <h4>How to connect your Google Calendar:</h4>
      <ol>
        <li>Click the "Connect Google Calendar" button below</li>
        <li>Sign in to your Google account</li>
        <li>Grant permission to BookFast to access your calendar</li>
        <li>You'll be redirected back to BookFast automatically</li>
      </ol>
    </div>

    <div class="auth-actions" *ngIf="isGmail">
      <button type="button" class="btn btn-google" (click)="connectCalendar()" [disabled]="isConnecting">
        <i class="fab fa-google"></i>
        {{ isConnecting ? 'Connecting...' : 'Connect Google Calendar' }}
      </button>
    </div>
  </div>

  <div class="sync-content" *ngIf="isConnected">
    <div class="connected-info">
      <h4>‚úÖ Calendar Connected Successfully!</h4>
      <p>Your Google Calendar is now synced with BookFast. Your bookings will be automatically added to your calendar.</p>
      
      <div class="sync-features">
        <h5>What's synced:</h5>
        <ul>
          <li>New bookings are automatically added to your Google Calendar</li>
          <li>Booking changes are reflected in both systems</li>
          <li>You'll receive calendar notifications for your bookings</li>
          <li>Your availability can be managed through both BookFast and Google Calendar</li>
        </ul>
      </div>

      <div class="disconnect-section">
        <button type="button" class="btn btn-danger" (click)="disconnectCalendar()" [disabled]="isDisconnecting">
          {{ isDisconnecting ? 'Disconnecting...' : 'Disconnect Calendar' }}
        </button>
      </div>
    </div>
  </div>

  <div class="messages">
    <div class="success-message" *ngIf="successMessage">
      {{ successMessage }}
    </div>
    <div class="error-message" *ngIf="errorMessage">
      {{ errorMessage }}
    </div>
  </div>
</div>