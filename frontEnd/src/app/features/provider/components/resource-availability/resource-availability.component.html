<div class="availability-container">
  <h3>Manage Weekly Availability Slots</h3>
  <form class="slot-form" (ngSubmit)="submit()">
    <label>
      Date:
  <input type="date" [(ngModel)]="slotDate" name="date" (change)="onDateChange($event.target.value)" required />
    </label>
    <label>
      Day of Week:
      <input type="text" [(ngModel)]="form.dayOfWeek" name="dayOfWeek" readonly required />
    </label>
    <label>
      Start Time:
      <input [(ngModel)]="form.startTime" name="startTime" type="time" required placeholder="Start Time">
    </label>
    <label>
      End Time:
      <input [(ngModel)]="form.endTime" name="endTime" type="time" required placeholder="End Time">
    </label>
    <div class="form-actions">
      <button type="submit">{{ selectedAvailability ? 'Update Slot' : 'Add Slot' }}</button>
      <button type="button" (click)="clearForm()" *ngIf="selectedAvailability">Cancel</button>
    </div>
  </form>
  <div *ngIf="error" style="color: red;">{{ error }}</div>
  <div *ngIf="success" style="color: green;">{{ success }}</div>

  <h4 style="margin-top:2rem;">Current Slots</h4>
  <ul *ngIf="availabilities.length">
    <li *ngFor="let avail of availabilities" (click)="selectAvailability(avail)">
      <span>{{ avail.dayOfWeek }} {{ avail.startTime }}-{{ avail.endTime }}</span>
      <button (click)="deleteAvailability(avail.id!); $event.stopPropagation()">Delete</button>
    </li>
  </ul>
  <div *ngIf="!availabilities.length" style="color:#888;">No slots added yet. Use the form above to add availability.</div>
</div>